/**
 * Minified by jsDelivr using Terser v5.9.0.
 * Original file: /npm/gifuct-js@2.1.2/lib/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decompressFrames=exports.decompressFrame=exports.parseGIF=void 0;var _gif=_interopRequireDefault(require("js-binary-schema-parser/lib/schemas/gif")),_jsBinarySchemaParser=require("js-binary-schema-parser"),_uint=require("js-binary-schema-parser/lib/parsers/uint8"),_deinterlace=require("./deinterlace"),_lzw=require("./lzw");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var parseGIF=function(e){var r=new Uint8Array(e);return(0,_jsBinarySchemaParser.parse)((0,_uint.buildStream)(r),_gif.default)};exports.parseGIF=parseGIF;var generatePatch=function(e){for(var r=e.pixels.length,a=new Uint8ClampedArray(4*r),t=0;t<r;t++){var s=4*t,i=e.pixels[t],o=e.colorTable[i]||[0,0,0];a[s]=o[0],a[s+1]=o[1],a[s+2]=o[2],a[s+3]=i!==e.transparentIndex?255:0}return a},decompressFrame=function(e,r,a){if(e.image){var t=e.image,s=t.descriptor.width*t.descriptor.height,i=(0,_lzw.lzw)(t.data.minCodeSize,t.data.blocks,s);t.descriptor.lct.interlaced&&(i=(0,_deinterlace.deinterlace)(i,t.descriptor.width));var o={pixels:i,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return t.descriptor.lct&&t.descriptor.lct.exists?o.colorTable=t.lct:o.colorTable=r,e.gce&&(o.delay=10*(e.gce.delay||10),o.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(o.transparentIndex=e.gce.transparentColorIndex)),a&&(o.patch=generatePatch(o)),o}console.warn("gif frame does not have associated image.")};exports.decompressFrame=decompressFrame;var decompressFrames=function(e,r){return e.frames.filter((function(e){return e.image})).map((function(a){return decompressFrame(a,e.gct,r)}))};exports.decompressFrames=decompressFrames;
//# sourceMappingURL=/sm/773849a119f0f199e34c59da9e25c669e808ccbb05668307fe6c1ea6ce1282e4.map